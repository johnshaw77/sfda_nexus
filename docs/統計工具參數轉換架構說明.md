# çµ±è¨ˆå·¥å…·åƒæ•¸è½‰æ›æ¶æ§‹èªªæ˜

## å•é¡ŒèƒŒæ™¯

åœ¨ AI å•ç­”ç³»çµ±ä¸­ï¼Œç”¨æˆ¶å¯ä»¥éš¨æ„æå•ï¼ŒAI éœ€è¦è‡ªå‹•èª¿ç”¨çµ±è¨ˆå·¥å…·ä¾†å›ç­”å•é¡Œã€‚ä½†æ˜¯çµ±è¨ˆå·¥å…·çš„åƒæ•¸æ ¼å¼ç™¼ç”Ÿäº†è®ŠåŒ–ï¼Œå¾å¹³å¦æ ¼å¼æ”¹ç‚ºåµŒå¥—æ ¼å¼ï¼Œå°è‡´ä¸åŒèª¿ç”¨è·¯å¾‘å‡ºç¾å…¼å®¹æ€§å•é¡Œã€‚

## èª¿ç”¨è·¯å¾‘åˆ†æ

### 1. å‰ç«¯ç®¡ç†å·¥å…·èª¿ç”¨è·¯å¾‘
```
ç”¨æˆ¶å¡«å¯«è¡¨å–® â†’ å‰ç«¯ McpToolsTester â†’ ä¸»å¾Œç«¯ API â†’ MCP æœå‹™ â†’ perform_ttest å·¥å…·
```

### 2. AI å•ç­”èª¿ç”¨è·¯å¾‘
```
ç”¨æˆ¶æå• â†’ AI åˆ†æ â†’ ç›´æ¥èª¿ç”¨ MCP æœå‹™ â†’ perform_ttest å·¥å…·
```

### 3. ç¬¬ä¸‰æ–¹ API èª¿ç”¨è·¯å¾‘
```
ç¬¬ä¸‰æ–¹ç³»çµ± â†’ ä¸»å¾Œç«¯ API â†’ MCP æœå‹™ â†’ perform_ttest å·¥å…·
```

## è§£æ±ºæ–¹æ¡ˆæ¶æ§‹

### é›™å±¤åƒæ•¸è½‰æ›ç­–ç•¥

æˆ‘å€‘æ¡ç”¨**é›™å±¤è½‰æ›ç­–ç•¥**ï¼Œç¢ºä¿æ‰€æœ‰èª¿ç”¨è·¯å¾‘éƒ½èƒ½æ­£å¸¸å·¥ä½œï¼š

#### ç¬¬ä¸€å±¤ï¼šMCP æœå‹™å±¤ï¼ˆæ ¸å¿ƒï¼‰
- **ä½ç½®**ï¼š`sfda_mcpserver/mcp-server/src/tools/stat/perform-ttest.js`
- **åŠŸèƒ½**ï¼šåœ¨å·¥å…·å…§éƒ¨å¯¦ç¾å‘å¾Œå…¼å®¹è™•ç†
- **è¦†è“‹ç¯„åœ**ï¼šAI å•ç­”ã€ç¬¬ä¸‰æ–¹ APIã€å‰ç«¯èª¿ç”¨

#### ç¬¬äºŒå±¤ï¼šå‰ç«¯å±¤ï¼ˆè¼”åŠ©ï¼‰
- **ä½ç½®**ï¼š`frontend/src/utils/parameterTransformer.js`
- **åŠŸèƒ½**ï¼šæä¾›ç”¨æˆ¶ç•Œé¢å„ªåŒ–å’Œå³æ™‚é©—è­‰
- **è¦†è“‹ç¯„åœ**ï¼šå‰ç«¯ç®¡ç†å·¥å…·

## æŠ€è¡“å¯¦ç¾

### MCP æœå‹™å±¤å¯¦ç¾

```javascript
// sfda_mcpserver/mcp-server/src/tools/stat/perform-ttest.js

async _execute(params) {
  // ğŸ”§ å‘å¾Œå…¼å®¹è™•ç†ï¼šè‡ªå‹•è½‰æ›èˆŠæ ¼å¼åƒæ•¸
  const normalizedParams = this.normalizeParameters(params);
  
  // ä½¿ç”¨æ­£è¦åŒ–å¾Œçš„åƒæ•¸é€²è¡Œå¾ŒçºŒè™•ç†
  // ...
}

normalizeParameters(params) {
  // å¦‚æœå·²ç¶“æ˜¯æ–°æ ¼å¼ï¼ˆåŒ…å« data ç‰©ä»¶ï¼‰ï¼Œç›´æ¥è¿”å›
  if (params.data) {
    return params;
  }

  // èˆŠæ ¼å¼è½‰æ›ç‚ºæ–°æ ¼å¼
  return {
    data: {
      sample1: params.sample1 || [],
      sample2: params.sample2 || null,
      paired: params.paired || false,
      alpha: params.alpha || 0.05,
      alternative: params.alternative || "two-sided"
    },
    context: {
      scenario: params.scenario || "statistical_analysis",
      description: params.description || "çµ±è¨ˆæª¢å®šåˆ†æ",
      variable_names: {
        sample1_name: params.sample1_name || "æ¨£æœ¬1",
        sample2_name: params.sample2_name || "æ¨£æœ¬2"
      }
    }
  };
}
```

### å‰ç«¯å±¤å¯¦ç¾

```javascript
// frontend/src/utils/parameterTransformer.js

export function processToolParameters(params, toolName) {
  // æ ¹æ“šå·¥å…·åç¨±å’Œé…ç½®è¦å‰‡è‡ªå‹•è½‰æ›åƒæ•¸æ ¼å¼
  return transformParameters(params, toolName);
}

// åœ¨ McpToolsTester.vue ä¸­ä½¿ç”¨
const finalParams = processToolParameters(processedParams, selectedTool.value.name);
```

## åƒæ•¸æ ¼å¼æ¨™æº–

### æ–°æ ¼å¼ï¼ˆæ¨™æº–ï¼‰
```javascript
{
  data: {
    sample1: [æ•¸æ“šé™£åˆ—],
    sample2: [æ•¸æ“šé™£åˆ—] | null,
    paired: boolean,
    alpha: number,
    alternative: "two-sided" | "less" | "greater"
  },
  context: {
    scenario: string,
    description: string,
    variable_names: {
      sample1_name: string,
      sample2_name: string
    }
  }
}
```

### èˆŠæ ¼å¼ï¼ˆå‘å¾Œå…¼å®¹ï¼‰
```javascript
{
  sample1: [æ•¸æ“šé™£åˆ—],
  sample2: [æ•¸æ“šé™£åˆ—],
  paired: boolean,
  alpha: number,
  alternative: string,
  scenario: string,
  description: string,
  sample1_name: string,
  sample2_name: string
}
```

## èª¿ç”¨å ´æ™¯è™•ç†

### å ´æ™¯1ï¼šAI å•ç­”
```
ç”¨æˆ¶ï¼šã€Œå¹«æˆ‘åˆ†æé€™äº›è¡€å£“æ•¸æ“šçš„æ²»ç™‚æ•ˆæœã€
AIï¼šè‡ªå‹•èª¿ç”¨ perform_ttest å·¥å…·
â†’ MCP æœå‹™å±¤è‡ªå‹•è½‰æ›åƒæ•¸æ ¼å¼
â†’ çµ±è¨ˆåˆ†ææ­£å¸¸åŸ·è¡Œ
```

### å ´æ™¯2ï¼šå‰ç«¯ç®¡ç†å·¥å…·
```
ç®¡ç†å“¡ï¼šåœ¨ McpToolsTester ä¸­æ¸¬è©¦å·¥å…·
â†’ å‰ç«¯å±¤è½‰æ›åƒæ•¸æ ¼å¼ï¼ˆç”¨æˆ¶é«”é©—å„ªåŒ–ï¼‰
â†’ MCP æœå‹™å±¤å†æ¬¡ç¢ºä¿æ ¼å¼æ­£ç¢ºï¼ˆé›™é‡ä¿éšœï¼‰
â†’ çµ±è¨ˆåˆ†ææ­£å¸¸åŸ·è¡Œ
```

### å ´æ™¯3ï¼šç¬¬ä¸‰æ–¹ API
```
ç¬¬ä¸‰æ–¹ç³»çµ±ï¼šèª¿ç”¨çµ±è¨ˆ API
â†’ ä¸»å¾Œç«¯è½‰ç™¼åˆ° MCP æœå‹™
â†’ MCP æœå‹™å±¤è‡ªå‹•è½‰æ›åƒæ•¸æ ¼å¼
â†’ çµ±è¨ˆåˆ†ææ­£å¸¸åŸ·è¡Œ
```

## å…¼å®¹æ€§æ¸¬è©¦

### æ¸¬è©¦è¦†è“‹ç¯„åœ
- âœ… æ–°æ ¼å¼åƒæ•¸ï¼šå®Œå…¨æ”¯æŒ
- âœ… èˆŠæ ¼å¼åƒæ•¸ï¼šè‡ªå‹•è½‰æ›æ”¯æŒ  
- âœ… æ··åˆæ ¼å¼ï¼šæ™ºèƒ½è™•ç†
- âœ… éŒ¯èª¤åƒæ•¸ï¼šæ­£ç¢ºé©—è­‰å’Œæç¤º

### æ¸¬è©¦è…³æœ¬
```bash
# MCP æœå‹™å±¤æ¸¬è©¦
cd sfda_mcpserver/mcp-server
node src/tests/test_perform_ttest_compatibility.js

# å‰ç«¯å±¤æ¸¬è©¦
# åœ¨ç€è¦½å™¨æ§åˆ¶å°é‹è¡Œ
testParameterTransformer()
```

## æ“´å±•æ€§è¨­è¨ˆ

### æ·»åŠ æ–°çµ±è¨ˆå·¥å…·

#### 1. MCP æœå‹™å±¤
```javascript
// åœ¨æ–°å·¥å…·ä¸­å¯¦ç¾ normalizeParameters æ–¹æ³•
class NewStatisticalTool extends BaseTool {
  normalizeParameters(params) {
    // å¯¦ç¾åƒæ•¸æ ¼å¼è½‰æ›é‚è¼¯
  }
}
```

#### 2. å‰ç«¯å±¤
```javascript
// åœ¨ parameterTransformer.js ä¸­æ·»åŠ é…ç½®
const TOOL_PARAMETER_RULES = {
  'new_statistical_tool': {
    targetFormat: 'nested',
    transformation: {
      // è½‰æ›è¦å‰‡é…ç½®
    }
  }
};
```

## å„ªå‹¢ç¸½çµ

### ğŸ¯ å®Œæ•´è¦†è“‹
- æ‰€æœ‰èª¿ç”¨è·¯å¾‘éƒ½æœ‰åƒæ•¸è½‰æ›ä¿éšœ
- AI å•ç­”ã€å‰ç«¯å·¥å…·ã€ç¬¬ä¸‰æ–¹ API å…¨éƒ¨æ”¯æŒ

### ğŸ”„ å‘å¾Œå…¼å®¹
- èˆŠæ ¼å¼åƒæ•¸è‡ªå‹•è½‰æ›
- ä¸ç ´å£ç¾æœ‰åŠŸèƒ½å’Œç”¨æˆ¶ç¿’æ…£

### ğŸš€ é«˜æ€§èƒ½
- MCP å±¤å„ªå…ˆæª¢æ¸¬ï¼Œé¿å…ä¸å¿…è¦è½‰æ›
- å‰ç«¯å±¤æä¾›å³æ™‚é©—è­‰ï¼Œæ”¹å–„ç”¨æˆ¶é«”é©—

### ğŸ“ˆ å¯æ“´å±•
- é…ç½®é©…å‹•çš„è½‰æ›è¦å‰‡
- è¼•é¬†æ·»åŠ æ–°çš„çµ±è¨ˆå·¥å…·

### ğŸ›¡ï¸ å®¹éŒ¯æ€§
- é›™é‡ä¿éšœæ©Ÿåˆ¶
- å®Œå–„çš„éŒ¯èª¤è™•ç†å’Œæ—¥èªŒè¨˜éŒ„

## éƒ¨ç½²æ³¨æ„äº‹é …

### MCP æœå‹™å™¨æ›´æ–°
```bash
# é‡å•Ÿ MCP æœå‹™å™¨ä»¥è¼‰å…¥æ–°çš„å‘å¾Œå…¼å®¹é‚è¼¯
cd sfda_mcpserver/mcp-server
npm restart
```

### å‰ç«¯æ›´æ–°
- å‰ç«¯ä»£ç¢¼å·²æ›´æ–°ï¼Œç„¡éœ€é‡å•Ÿæœå‹™å™¨
- åˆ·æ–°ç€è¦½å™¨é é¢å³å¯ä½¿ç”¨æ–°åŠŸèƒ½

### é©—è­‰éƒ¨ç½²
1. æ¸¬è©¦ AI å•ç­”ä¸­çš„çµ±è¨ˆåˆ†æåŠŸèƒ½
2. æ¸¬è©¦å‰ç«¯ MCP Tools Tester
3. æª¢æŸ¥æ—¥èªŒç¢ºèªåƒæ•¸è½‰æ›æ­£å¸¸å·¥ä½œ

é€™å€‹é›™å±¤æ¶æ§‹ç¢ºä¿äº†çµ±è¨ˆå·¥å…·åœ¨æ‰€æœ‰ä½¿ç”¨å ´æ™¯ä¸­éƒ½èƒ½æ­£å¸¸å·¥ä½œï¼Œç‚ºæœªä¾†çš„æ“´å±•å¥ å®šäº†å …å¯¦çš„åŸºç¤ï¼ 