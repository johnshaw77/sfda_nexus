# 表格響應式重構文檔

## 📋 重構概述

本次重構主要針對 SFDA Nexus 中的管理表格進行響應式優化，具體包括 `views/admin/users.vue` 和 `views/admin/models.vue` 兩個表格。這屬於 CSS 響應式重構計畫中的「表格響應式專項」任務，也是計畫中技術難度較高的部分。

## 🎯 重構目標

1. **提升移動端體驗**：優化表格在小螢幕設備上的顯示和操作
2. **避免水平溢出**：防止表格在小螢幕上需要大量水平滾動
3. **保留關鍵數據**：確保在各種螢幕尺寸下都能顯示最重要的信息
4. **操作便利性**：重新設計小螢幕上的操作區域，提高易用性

## 🛠️ 重構方案

### 核心策略

1. **動態列顯示與隱藏**
   - 使用 Ant Design Vue 的 `responsive` 屬性
   - 根據螢幕大小動態顯示/隱藏次要列

2. **水平滾動優化**
   - 設置 `scroll={{ x: true }}` 啟用水平滾動
   - 固定關鍵列（如「名稱」和「操作」列）
   - 為列設置合理的寬度

3. **操作區域優化**
   - 大螢幕：完整按鈕組
   - 小螢幕：下拉菜單替代多個操作按鈕

### 技術實現

1. **響應式監測**
   ```js
   // 響應式斷點
   const isSmallScreen = ref(false);
   const isMediumScreen = ref(false);

   // 監聽螢幕大小變化
   const updateScreenSize = () => {
     isSmallScreen.value = window.innerWidth < 768;
     isMediumScreen.value = window.innerWidth >= 768 && window.innerWidth < 992;
   };

   // 掛載時和視窗調整時更新
   onMounted(() => {
     updateScreenSize();
     window.addEventListener("resize", updateScreenSize);
   });
   ```

2. **動態列配置**
   ```js
   const columns = computed(() => {
     return [
       {
         title: "用戶名",
         // ...
         fixed: isSmallScreen.value ? "left" : undefined,
       },
       {
         title: "郵箱",
         // ...
         responsive: ["sm", "md", "lg", "xl"], // 在超小螢幕上隱藏
       },
       // ...
     ];
   });
   ```

3. **表格滾動配置**
   ```html
   <a-table
     :scroll="{ x: isSmallScreen ? 500 : 'max-content' }"
     // ...
   >
   ```

## 📊 用戶表格 (users.vue) 重構詳情

### 優先級列顯示策略

| 欄位 | 超小螢幕 (xs) | 小螢幕 (sm) | 中螢幕 (md) | 大螢幕 (lg) | 超大螢幕 (xl) |
|------|--------------|------------|------------|------------|-------------|
| 頭像 | ❌ 隱藏       | ❌ 隱藏     | ✅ 顯示    | ✅ 顯示    | ✅ 顯示     |
| 用戶名 | ✅ 顯示 (固定) | ✅ 顯示    | ✅ 顯示    | ✅ 顯示    | ✅ 顯示     |
| 郵箱 | ❌ 隱藏       | ✅ 顯示    | ✅ 顯示    | ✅ 顯示    | ✅ 顯示     |
| 角色 | ✅ 顯示       | ✅ 顯示    | ✅ 顯示    | ✅ 顯示    | ✅ 顯示     |
| 狀態 | ✅ 顯示       | ✅ 顯示    | ✅ 顯示    | ✅ 顯示    | ✅ 顯示     |
| 最後登入 | ❌ 隱藏     | ❌ 隱藏    | ❌ 隱藏    | ✅ 顯示    | ✅ 顯示     |
| 操作 | ✅ 顯示 (下拉) | ✅ 顯示 (下拉) | ✅ 顯示 (按鈕) | ✅ 顯示 (按鈕) | ✅ 顯示 (按鈕) |

### 操作區設計

**大螢幕設計**
```html
<a-space v-if="!isSmallScreen">
  <a-button type="text" size="small">
    <EditOutlined /> 編輯
  </a-button>
  <!-- 其他按鈕 -->
</a-space>
```

**小螢幕設計**
```html
<a-dropdown v-else>
  <a-button size="small" type="link">
    <MoreOutlined style="font-size: 18px" />
  </a-button>
  <template #overlay>
    <a-menu>
      <a-menu-item>
        <EditOutlined /> 編輯
      </a-menu-item>
      <!-- 其他選項 -->
    </a-menu>
  </template>
</a-dropdown>
```

## 📊 模型表格 (models.vue) 重構詳情

### 優先級列顯示策略

| 欄位 | 超小螢幕 (xs) | 小螢幕 (sm) | 中螢幕 (md) | 大螢幕 (lg) | 超大螢幕 (xl) |
|------|--------------|------------|------------|------------|-------------|
| 模型名稱 | ✅ 顯示 (固定) | ✅ 顯示    | ✅ 顯示    | ✅ 顯示    | ✅ 顯示     |
| 提供商 | ✅ 顯示       | ✅ 顯示    | ✅ 顯示    | ✅ 顯示    | ✅ 顯示     |
| 模型ID | ❌ 隱藏       | ❌ 隱藏    | ✅ 顯示    | ✅ 顯示    | ✅ 顯示     |
| 啟動 | ✅ 顯示       | ✅ 顯示    | ✅ 顯示    | ✅ 顯示    | ✅ 顯示     |
| 預設 | ❌ 隱藏       | ✅ 顯示    | ✅ 顯示    | ✅ 顯示    | ✅ 顯示     |
| 多模態 | ❌ 隱藏       | ❌ 隱藏    | ✅ 顯示    | ✅ 顯示    | ✅ 顯示     |
| 最大Tokens | ❌ 隱藏    | ❌ 隱藏    | ❌ 隱藏    | ✅ 顯示    | ✅ 顯示     |
| 溫度 | ❌ 隱藏        | ❌ 隱藏    | ❌ 隱藏    | ✅ 顯示    | ✅ 顯示     |
| 配置 | ❌ 隱藏        | ❌ 隱藏    | ✅ 顯示    | ✅ 顯示    | ✅ 顯示     |
| 創建時間 | ❌ 隱藏      | ❌ 隱藏    | ❌ 隱藏    | ✅ 顯示    | ✅ 顯示     |
| 操作 | ✅ 顯示 (下拉) | ✅ 顯示 (下拉) | ✅ 顯示 (按鈕) | ✅ 顯示 (按鈕) | ✅ 顯示 (按鈕) |

### 特殊優化

1. **表格寬度預設**
   ```js
   :scroll="{ x: isSmallScreen ? 600 : 'max-content' }"
   ```

2. **列寬優化**
   - 為每一列設置了合理的固定寬度
   - 根據不同屏幕尺寸調整操作列的寬度

3. **響應式優先級**
   - 優先保留業務功能相關的列（狀態、啟動等）
   - 其次保留關鍵標識列（名稱、提供商等）
   - 最後才是輔助信息列（創建時間、詳細配置等）

## 📱 測試結果

| 設備類型 | 屏幕尺寸 | 用戶表格 | 模型表格 |
|---------|---------|---------|---------|
| 手機 | <576px | 顯示 3 列，固定首尾列 | 顯示 3 列，固定首尾列 |
| 平板 | 576-768px | 顯示 4 列，操作欄下拉 | 顯示 4 列，操作欄下拉 |
| 小筆電 | 768-992px | 顯示 5 列，開始顯示完整操作欄 | 顯示 6 列，開始顯示完整操作欄 |
| 筆電 | 992-1200px | 顯示全部 7 列 | 顯示 9 列，基本完整 |
| 桌機 | >1200px | 顯示全部 7 列，佈局最優 | 顯示全部 11 列，佈局最優 |

## 🚀 效益分析

1. **功能完整性**
   - 在所有尺寸下均保留了主要功能，無功能丟失
   - 小螢幕雖隱藏部分列，但關鍵操作仍可通過下拉菜單完成

2. **使用體驗提升**
   - 減少了小螢幕上的水平滾動次數
   - 提高了關鍵信息的可讀性
   - 優化了觸控設備上的操作便利性

3. **代碼品質**
   - 動態列設計使配置更為集中和靈活
   - 使用計算屬性實現響應式邏輯，降低耦合
   - 借助 Ant Design Vue 的內建功能實現優雅降級

## 📌 未來優化方向

1. **虛擬滾動**
   - 為大數據量表格添加虛擬滾動支持，進一步提升性能

2. **列優先級個性化**
   - 允許用戶自定義列的顯示順序和優先級

3. **表格卡片視圖**
   - 在極小螢幕上提供可選的卡片視圖模式作為表格的替代
